function getResources() {
  return new Promise((res, rej) => {
    setTimeout(() => {
      res({
        entites: [
          {
            "@odata.etag": 'W/"513518154"',
            vel_startdate: "2024-06-17T08:00:00Z",
            vel_name: "Noah Gillham",
            vel_duration: 510,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "91b27c58-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "68c5a7f8-bb69-eb11-a812-00224814616c",
            vel_enddate: "2024-06-17T16:30:00Z",
          },
          {
            "@odata.etag": 'W/"513518187"',
            vel_startdate: "2024-06-17T05:00:00Z",
            vel_name: "Old Mate's Agency",
            vel_duration: 1020,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "b9b27c58-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "b8bbfd6d-f3b1-eb11-8236-00224814b363",
            vel_enddate: "2024-06-17T22:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518227"',
            vel_startdate: "2024-06-17T00:00:00Z",
            vel_name: "Nilanthie Sivasubramaniam",
            vel_duration: 1440,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "f2f3745e-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "b03dab72-30e8-eb11-bacb-00224814b853",
            vel_enddate: "2024-06-18T00:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518275"',
            vel_startdate: "2024-06-17T08:00:00Z",
            vel_name: "Ali Khan",
            vel_duration: 360,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "1ff4745e-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "402fd944-4555-eb11-a812-00224814c8e9",
            vel_enddate: "2024-06-17T14:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518342"',
            vel_startdate: "2024-06-17T08:00:00Z",
            vel_name: "Philip Blow",
            vel_duration: 540,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "62f4745e-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "e2605644-02f1-eb11-94ef-00224814e316",
            vel_enddate: "2024-06-17T17:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518375"',
            vel_startdate: "2024-06-17T08:00:00Z",
            vel_name: "Caroline Olminkhof",
            vel_duration: 540,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "85f4745e-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "41506cb7-8e60-eb11-a812-00224815157c",
            vel_enddate: "2024-06-17T17:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518408"',
            vel_startdate: "2024-06-17T07:00:00Z",
            vel_name: "Stephen Pocknall",
            vel_duration: 600,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "baf4745e-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "a5ba7ae1-8e60-eb11-a812-00224815157c",
            vel_enddate: "2024-06-17T17:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518477"',
            vel_startdate: "2024-06-17T00:00:00Z",
            vel_name: "Joel Yeo",
            vel_duration: 1440,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "02f5745e-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "9659b5e8-2343-eb11-a812-002248151e02",
            vel_enddate: "2024-06-18T00:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518523"',
            vel_startdate: "2024-06-17T00:00:00Z",
            vel_name: "Bathsheba Benjesse",
            vel_duration: 1440,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "35f5745e-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "0b2892be-da71-eb11-a812-002248153009",
            vel_enddate: "2024-06-18T00:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518568"',
            vel_startdate: "2024-06-17T08:30:00Z",
            vel_name: "Hong Liu",
            vel_duration: 330,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "6af5745e-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "1511e95f-078d-eb11-b1ac-002248155d0e",
            vel_enddate: "2024-06-17T14:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518588"',
            vel_startdate: "2024-06-17T00:00:00Z",
            vel_name: "Hanae Sakuma",
            vel_duration: 1440,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "80f5745e-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "7ea72179-078d-eb11-b1ac-002248155d0e",
            vel_enddate: "2024-06-18T00:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518635"',
            vel_startdate: "2024-06-17T07:00:00Z",
            vel_name: "Rafael Santana",
            vel_duration: 600,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "b8f5745e-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "3f008f28-0a8d-eb11-b1ac-002248155d0e",
            vel_enddate: "2024-06-17T17:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518668"',
            vel_startdate: "2024-06-17T08:00:00Z",
            vel_name: "Fabio Phang",
            vel_duration: 540,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "d9f5745e-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "ad495c22-865c-ec11-8f8f-002248156ca8",
            vel_enddate: "2024-06-17T17:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518701"',
            vel_startdate: "2024-06-17T08:00:00Z",
            vel_name: "Matthew Mccrorie",
            vel_duration: 540,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "fff5745e-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "ee203627-6b72-ec11-8942-002248158359",
            vel_enddate: "2024-06-17T17:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518728"',
            vel_startdate: "2024-06-17T00:00:00Z",
            vel_name: "Leff's Agency",
            vel_duration: 1440,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "b2736e64-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "50a3b059-6510-ec11-b6e6-002248158fa3",
            vel_enddate: "2024-06-18T00:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518773"',
            vel_startdate: "2024-06-17T07:30:00Z",
            vel_name: "Bhupesh Singal",
            vel_duration: 510,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "e0736e64-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "ef98fcf8-df70-ec11-8f8e-002248159071",
            vel_enddate: "2024-06-17T16:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518806"',
            vel_startdate: "2024-06-17T08:00:00Z",
            vel_name: "Karin Piasevoli",
            vel_duration: 540,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "01746e64-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "66b5019e-e070-ec11-8f8e-002248159071",
            vel_enddate: "2024-06-17T17:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518839"',
            vel_startdate: "2024-06-17T08:00:00Z",
            vel_name: "Kylie Dorahy",
            vel_duration: 540,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "24746e64-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "8d123127-e170-ec11-8f8e-002248159071",
            vel_enddate: "2024-06-17T17:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518874"',
            vel_startdate: "2024-06-17T08:00:00Z",
            vel_name: "Susan Thornhill",
            vel_duration: 540,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "47746e64-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "26366cb3-e170-ec11-8f8e-002248159071",
            vel_enddate: "2024-06-17T17:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518906"',
            vel_startdate: "2024-06-17T06:30:00Z",
            vel_name: "Alicia Sandles",
            vel_duration: 450,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "68746e64-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "1254e3ee-e170-ec11-8f8e-002248159071",
            vel_enddate: "2024-06-17T14:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518959"',
            vel_startdate: "2024-06-17T07:00:00Z",
            vel_name: "Joanmar Webster",
            vel_duration: 480,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "9d746e64-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "c7d51342-e270-ec11-8f8e-002248159071",
            vel_enddate: "2024-06-17T15:00:00Z",
          },
          {
            "@odata.etag": 'W/"513518986"',
            vel_startdate: "2024-06-17T07:00:00Z",
            vel_name: "Medical Staff",
            vel_duration: 840,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "b8746e64-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "be715d2a-5bc3-eb11-bacc-002248183900",
            vel_enddate: "2024-06-17T21:00:00Z",
          },
          {
            "@odata.etag": 'W/"513519036"',
            vel_startdate: "2024-06-17T08:00:00Z",
            vel_name: "Elizabeth Kember",
            vel_duration: 540,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "ec746e64-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "ecfc94b0-96e5-eb11-bacb-002248185bb1",
            vel_enddate: "2024-06-17T17:00:00Z",
          },
          {
            "@odata.etag": 'W/"513519069"',
            vel_startdate: "2024-06-17T00:00:00Z",
            vel_name: "Jennifer Sach",
            vel_duration: 1440,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "0d756e64-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "3f9e1ecb-d8e5-eb11-bacb-002248185bb1",
            vel_enddate: "2024-06-18T00:00:00Z",
          },
          {
            "@odata.etag": 'W/"513519115"',
            vel_startdate: "2024-06-17T00:00:00Z",
            vel_name: "Jennifer Coleman",
            vel_duration: 1440,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "3b756e64-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "683ec6ed-7be3-eb11-bacb-002248185e98",
            vel_enddate: "2024-06-18T00:00:00Z",
          },
          {
            "@odata.etag": 'W/"513519161"',
            vel_startdate: "2024-06-17T06:00:00Z",
            vel_name: "Krupa Gandhi",
            vel_duration: 720,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "6a756e64-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "06a80e07-7de3-eb11-bacb-002248185e98",
            vel_enddate: "2024-06-17T18:00:00Z",
          },
          {
            "@odata.etag": 'W/"513519194"',
            vel_startdate: "2024-06-17T08:00:00Z",
            vel_name: "Steve Lucas",
            vel_duration: 540,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "8e756e64-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "19c7925b-6ad6-ec11-a7b5-00224893145d",
            vel_enddate: "2024-06-17T17:00:00Z",
          },
          {
            "@odata.etag": 'W/"513519227"',
            vel_startdate: "2024-06-17T00:00:00Z",
            vel_name: "Maria Alyssa Dominguez",
            vel_duration: 1440,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "af756e64-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "af4e782b-145b-ed11-9562-00224893b5f9",
            vel_enddate: "2024-06-18T00:00:00Z",
          },
          {
            "@odata.etag": 'W/"513519272"',
            vel_startdate: "2024-06-17T06:00:00Z",
            vel_name: "Alexander Peterson",
            vel_duration: 720,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "30b5666a-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "bbb97b20-3b82-eb11-a812-0022481522dc",
            vel_enddate: "2024-06-17T18:00:00Z",
          },
          {
            "@odata.etag": 'W/"513519305"',
            vel_startdate: "2024-06-17T08:00:00Z",
            vel_name: "Darrel DCosta",
            vel_duration: 540,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "56b5666a-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "b8483eda-b6a8-eb11-9442-0022481533e7",
            vel_enddate: "2024-06-17T17:00:00Z",
          },
          {
            "@odata.etag": 'W/"513519350"',
            vel_startdate: "2024-06-17T00:00:00Z",
            vel_name: "Alex Peterson",
            vel_duration: 480,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "94b5666a-052d-ef11-840a-000d3a6a1892",
            _vel_bookableresourceid_value:
              "76e033fa-e24c-ec11-8f8e-002248151e5b",
            vel_enddate: "2024-06-17T08:00:00Z",
          },
          {
            "@odata.etag": 'W/"442047109"',
            vel_startdate: "2024-02-24T05:00:00Z",
            vel_name: "Old Mate's Agency",
            vel_duration: 1020,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "5aeaf96c-70d3-ee11-904c-000d3a6a5edb",
            _vel_bookableresourceid_value:
              "b8bbfd6d-f3b1-eb11-8236-00224814b363",
            vel_enddate: "2024-02-24T22:00:00Z",
          },
          {
            "@odata.etag": 'W/"442047144"',
            vel_startdate: "2024-02-24T00:00:00Z",
            vel_name: "Nilanthie Sivasubramaniam",
            vel_duration: 1440,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "79eaf96c-70d3-ee11-904c-000d3a6a5edb",
            _vel_bookableresourceid_value:
              "b03dab72-30e8-eb11-bacb-00224814b853",
            vel_enddate: "2024-02-25T00:00:00Z",
          },
          {
            "@odata.etag": 'W/"442047182"',
            vel_startdate: "2024-02-24T08:00:00Z",
            vel_name: "Ali Khan",
            vel_duration: 360,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "a1eaf96c-70d3-ee11-904c-000d3a6a5edb",
            _vel_bookableresourceid_value:
              "402fd944-4555-eb11-a812-00224814c8e9",
            vel_enddate: "2024-02-24T14:00:00Z",
          },
          {
            "@odata.etag": 'W/"442047289"',
            vel_startdate: "2024-02-24T07:00:00Z",
            vel_name: "Stephen Pocknall",
            vel_duration: 600,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "5b9af472-70d3-ee11-904c-000d3a6a5edb",
            _vel_bookableresourceid_value:
              "a5ba7ae1-8e60-eb11-a812-00224815157c",
            vel_enddate: "2024-02-24T17:00:00Z",
          },
          {
            "@odata.etag": 'W/"442047326"',
            vel_startdate: "2024-02-24T00:00:00Z",
            vel_name: "Joel Yeo",
            vel_duration: 1440,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "819af472-70d3-ee11-904c-000d3a6a5edb",
            _vel_bookableresourceid_value:
              "9659b5e8-2343-eb11-a812-002248151e02",
            vel_enddate: "2024-02-25T00:00:00Z",
          },
          {
            "@odata.etag": 'W/"442047388"',
            vel_startdate: "2024-02-24T00:00:00Z",
            vel_name: "Bathsheba Benjesse",
            vel_duration: 1440,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "c29af472-70d3-ee11-904c-000d3a6a5edb",
            _vel_bookableresourceid_value:
              "0b2892be-da71-eb11-a812-002248153009",
            vel_enddate: "2024-02-25T00:00:00Z",
          },
          {
            "@odata.etag": 'W/"442047440"',
            vel_startdate: "2024-02-24T00:00:00Z",
            vel_name: "Hanae Sakuma",
            vel_duration: 1440,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "fb9af472-70d3-ee11-904c-000d3a6a5edb",
            _vel_bookableresourceid_value:
              "7ea72179-078d-eb11-b1ac-002248155d0e",
            vel_enddate: "2024-02-25T00:00:00Z",
          },
          {
            "@odata.etag": 'W/"442047549"',
            vel_startdate: "2024-02-24T00:00:00Z",
            vel_name: "Leff's Agency",
            vel_duration: 1440,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "6d9bf472-70d3-ee11-904c-000d3a6a5edb",
            _vel_bookableresourceid_value:
              "50a3b059-6510-ec11-b6e6-002248158fa3",
            vel_enddate: "2024-02-25T00:00:00Z",
          },
          {
            "@odata.etag": 'W/"442047670"',
            vel_startdate: "2024-02-24T08:00:00Z",
            vel_name: "Susan Thornhill",
            vel_duration: 540,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "c14aef78-70d3-ee11-904c-000d3a6a5edb",
            _vel_bookableresourceid_value:
              "26366cb3-e170-ec11-8f8e-002248159071",
            vel_enddate: "2024-02-24T17:00:00Z",
          },
          {
            "@odata.etag": 'W/"442047716"',
            vel_startdate: "2024-02-24T08:00:00Z",
            vel_name: "Jennifer Crowe",
            vel_duration: 540,
            statecode: 0,
            vel_calendarresourceworkinghourid:
              "ef4aef78-70d3-ee11-904c-000d3a6a5edb",
            _vel_bookableresourceid_value:
              "61047d85-e170-ec11-8f8e-002248159071",
            vel_enddate: "2024-02-24T17:00:00Z",
          },
        ],
      });
    }, 5000);
  });
}

async function handleFetch() {
  const response = await getResources();
  response?.entites?.map((timeOff) => {
    return {
      resourceId: timeOff?._vel_bookableresourceid_value,
      start: new Date(timeOff?.vel_startdate),
      end: new Date(timeOff?.vel_enddate),
      id: timeOff?.vel_calendarresourceworkinghourid,
      display: "background",
    };
  });
}

async function handleFetch2() {
  const response = await getResources();

  const result = response?.entites?.flatMap((timeOff) => {
    const startDate = new Date(timeOff?.vel_startdate);
    const endDate = new Date(timeOff?.vel_enddate);

    if (!startDate || !endDate) return [];

    const day = startDate.toISOString().split("T")[0]; // "2024-06-17"

    const startOfDay = new Date(`${day}T00:00:00Z`);
    const endOfDay = new Date(`${day}T23:59:59Z`);

    return [
      {
        resourceId: timeOff?._vel_bookableresourceid_value,
        start: startOfDay,
        end: startDate,
        id: `${timeOff?.vel_calendarresourceworkinghourid}_before`,
        display: "background",
      },
      {
        resourceId: timeOff?._vel_bookableresourceid_value,
        start: endDate,
        end: endOfDay,
        id: `${timeOff?.vel_calendarresourceworkinghourid}_after`,
        display: "background",
      },
    ];
  });
  console.log(result);
  return result || [];
}

handleFetch2();
